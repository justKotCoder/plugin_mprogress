<ul>
    {{#courses}}
    <li class="course">
        <h2>{{course_name}}</h2>
        <p>Прогресс курса: 
            <progress value="{{progress}}" max="100">{{progress}}%</progress> ({{progress}}%)
        </p>
        <p>Итоговая оценка: {{final_grade}}%</p>
        <button class="toggle-details">▼</button>
        <table class="course-activities" style="display: none;">
            <thead>
                <tr>
                    <th>Тип задания</th>
                    <th>Задание</th>
                    <th>Оценка (%)</th>
                    <th>Баллы</th>
                    <th>Рассчитанный вес</th>
                    <th>Вклад в итог курса</th>
                </tr>
            </thead>
            <tbody>
                {{#activities}}
                <tr>
                    <td>{{type}}</td>
                    <td>{{name}}</td>
                    <td>{{percentage}}%</td>
                    <td>{{grade_display}}</td>
                    <td>{{calculated_weight}}%</td>
                    <td>{{contribution}}%</td>
                </tr>
                {{/activities}}
            </tbody>
        </table>
    </li>
    {{/courses}}
</ul>

<script>
    document.querySelectorAll('.toggle-details').forEach(button => {
        button.addEventListener('click', () => {
            const table = button.nextElementSibling;
            table.style.display = table.style.display === 'none' ? 'block' : 'none';
            button.textContent = table.style.display === 'none' ? '▼' : '▲';
        });
    });
</script>